<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>éšæœºå°å­¦æ•°å­¦é¢˜ - 521æºç ç½‘</title>
		<style type="text/css">
			*{
				
				font-family: "å¾®è½¯é›…é»‘";
				font-size: 20px;
				border-collapse: collapse;
			}
			#title,.p_title{
				text-align: center;
				font-size: 30px;
				font-weight: 900;
			}
			#title{
				height: 120px;
				line-height: 120px;
			}
			.p_title{
				clear: both;
				height: 140px;
				line-height: 140px;
				display: none;
			}
			#choose{
				text-align: center;
			}
			#out{
				width: 880px;
				margin: 20px auto;
				padding: 20px;
			}
			#content{
				/*height: 1000px;*/
				float: left;
				border: 1px black solid;
			}
			.question{
				width: 420px;
				height: 47px;
				float: left;
			}
			.question .subject{
				display: inline-block;
				
			}
			.question .result{
				text-align: center;
				border: 0px;
				border-bottom: 1px black solid;
			}
			.a,.b,.c,.answer{
				display: inline-block;
				width: 60px;
				text-align: center;
			}
			.op,.op2{
				display: inline-block;
				width: 22px;
				text-align: center;
			}
			.answer{
				color: green;
				/*font-style: italic;*/
				font-weight: 900;
			}
			.hidden{
				display: none;
			}
			.show{
				display: inline-block;
			}
			.seq{
				display: none;
				font-style: italic;
				width: 30px;
			}
		</style>
	</head>
	<body>
		<div id="">
			<div id="title">
					å°å­¦æ•°å­¦ç»ƒä¹ é¢˜
			</div>
			<div id="top">
				<div id="choose">
					<form action="" method="post" onsubmit="return false;" name="ckop">
						é€‰æ‹©ç¬¦å·ï¼š
						<input type="checkbox" name="op" id="jia" value="+" checked/><label for="jia">åŠ </label>&emsp;
						<input type="checkbox" name="op" id="jian" value="-"/><label for="jian">å‡</label>&emsp;
						<input type="checkbox" name="op" id="cheng" value="*"/><label for="cheng">ä¹˜</label>&emsp;
						<input type="checkbox" name="op" id="chu" value="/"/><label for="chu">é™¤</label>&emsp;
						<br /><br />
						è¾“å…¥èŒƒå›´ï¼š
						<input type="text" value="0" size="8" id="minNum"/>&emsp;åˆ°&emsp;<input type="text" value="100" size="8" id="maxNum"/>
						<br /><br />
						æ•°é‡ï¼š<input type="text" id="q_num" value="50" />
						æ˜¯å¦æ˜¾ç¤ºç¼–å·ï¼š<input type="checkbox" id="s_seq" onchange="show_seq(this);" />
						<br /><br />
						<input type="button" value="å‡ºé¢˜" onclick="work();"/>
						<input type="button" value="æ˜¾ç¤ºç­”æ¡ˆ" id="show_an" onclick="show_answer(this);" />
						<input type="button" value="åˆ¤é¢˜" id="check_an" onclick="check_answer(this);" />
						<input type="button" value="æ‰“å°" onclick="print_q();" />
						<input type="button" value="éšè—æ¨ªçº¿æ‰“å°"  onclick="show_line(this);" />
						<br /><br />
						<div>æ³¨ï¼šå¯ä»¥å…ˆç‚¹å‡» "æ˜¾ç¤ºç­”æ¡ˆ" å†åå†é€‰æ‹© "éšè—æ¨ªçº¿æ‰“å°" æ‰“å°ç­”æ¡ˆ</div>
        <p class="c_lsxg c_lysxg"><a href="https://xzwzl6.github.io/xiaoxueschuti2" target="_blank">2ä¸ªæ•°éšæœºè¿ç®—é¢˜</a></p>
        <p class="c_lsxg c_lysxg"><a href="https://xzwzl6.github.io/xiaoxueszuoti" target="_blank">å¦å¤–ä¸€æ¬¾å‡ºé¢˜</a></p>
        <p class="c_lsxg c_lysxg"><a href="https://xgwlcm.github.io/xwz" target="_blank">ğŸ‘‰è½©å“¥æ›´å¤šèµ„æº</a></p>
						<div id="show_msg"></div>
					</form>
				</div>
			</div>
			<div id="out">
				<div id="content" >
                	<!--<div class="question">
						<span class="seq">1ã€&emsp;</span>
						<span class="subject">
							<span class="a">1</span>
							<span>+</span>
							<span class="b">1</span>
							<span>+</span>
							<span class="c">1</span>
							=<input type="text" size="6" class="result" />
						</span>
						<span class="answer">2</span>
						<span class="tip">âˆš</span>
					</div>-->
				</div>
			</div>
		</div>
	</body>
	<script type="text/javascript">
		var op=[];// è¿ç®—ç¬¦æ•°ç»„
		var minNum,maxNum,a,b,total=0;// è·å–æœ€å°å€¼ï¼Œæœ€å¤§å€¼ï¼Œéšæœºæ•°aï¼Œæ•°b;æ€»é¢˜æ•°
		var title = "";
		// è·å–å‚æ•°
		function getOp () {
			// è·å–é€‰ä¸­çš„è¿ç®—ç¬¦
			op=[];
			ops = document.getElementsByName("op");
			for (var i = 0; i < ops.length; i++) {
				if(ops[i].checked){
					op.push(ops[i].value);
				}
			}
			// è·å–æ•°
			minNum = parseInt(document.getElementById("minNum").value);
			maxNum = parseInt(document.getElementById("maxNum").value);
			total = document.getElementById("q_num").value;
			if(isNaN(minNum) || isNaN(maxNum)){
				alert("è¯·è¾“å…¥æ­£ç¡®çš„æ•°å­—ï¼");
				return false;
			}
			title = "å°å­¦æ•°å­¦ã€";
			for (var i = 0; i < op.length; i++) {
				switch (op[i]){
					case '+':title += "åŠ ã€";break;
					case '-':title += "å‡ã€";break;
					case '*':title += "ä¹˜ã€";break;
					case '/':title += "é™¤ã€";break;
					default:
						break;
				}
			}
			title = title.substr(0,title.length-1);
			title+="ã€‘ç»ƒä¹ é¢˜";
			document.getElementById("title").innerHTML = title;
			return true;
		}
		// å‡ºé¢˜æŒ‰é’®
		function work () {
			document.getElementById("content").innerHTML = "";
			document.getElementById("check_an").value ="åˆ¤é¢˜";
			document.getElementById("show_an").value = "æ˜¾ç¤ºç­”æ¡ˆ";
			document.getElementById("s_seq").checked = false;
			if(!getOp()){ return; }
			for (var i = 1; i <= total; i++) {
				getQuerstin(i);
			}
		}
		// å‡ºé¢˜å¹¶æ˜¾ç¤º
		function getQuerstin (seq) {
			a = Math.floor(Math.random()*(maxNum-minNum+1)+minNum);
			b = Math.floor(Math.random()*(maxNum-minNum+1)+minNum);
			c = Math.floor(Math.random()*(maxNum-minNum+1)+minNum);
			o = op[Math.floor(Math.random()*op.length)];
			o2 = op[Math.floor(Math.random()*op.length)];
			// é™¤æ•°ä¸èƒ½ä¸º0ï¼Œå¹¶ä¸”a/bèƒ½æ•´é™¤ï¼Œbä¸ºaçš„çº¦æ•°
			if(o=='/'){ // 
				if(b==0){b= Math.floor(Math.random()*(maxNum)+1);}
				if(a!=0){
					// a = Math.floor(Math.random()*(maxNum)+1);// è®©è¢«é™¤æ•°ä¸ä¸º0
					b = getChuShu(a);// é™¤æ³•è¿ç®—ï¼Œé™¤æ•°ä¸ºè¢«é™¤æ•°çš„çº¦æ•°
				}
			}
			if(o2 == '/'){
				// é™¤æ•°Cä¸èƒ½ä¸º0
				if(c==0){
					c = Math.floor(Math.random()*(maxNum)+1);// è®©é™¤æ•°ä¸ä¸º0
				}
				// b/cèƒ½æ•´é™¤
				if(o == "+" || o=="-"){
					if(b!=0){
						//b = Math.floor(Math.random()*(maxNum)+1);// è®©è¢«é™¤æ•°ä¸ä¸º0
						c = getChuShu(b);// é™¤æ³•è¿ç®—ï¼Œé™¤æ•°ä¸ºè¢«é™¤æ•°çš„çº¦æ•°
					}
				}
				else if(o=="*" || o== "/"){
					var temp = eval(a+o+b);
					if(temp != "0"){
						c = getChuShu(temp);// é™¤æ³•è¿ç®—ï¼Œé™¤æ•°ä¸ºè¢«é™¤æ•°çš„çº¦æ•°
					}
				}
			}
			// ç­”æ¡ˆï¼š
			var answer = eval(a+o+b+o2+c);
			// ä¹˜å·: &times;   Ã—  é™¤æ³•:  &divide;  Ã·    &minus;  -
			var str = o.replace("*","&times;").replace("/","&divide;");
			var op2 = o2.replace("*","&times;").replace("/","&divide;");
			var txt = "<div class='question'><span class='seq'>"+seq+"ã€&emsp;</span><span class='subject'><span class='a'>"+a+"</span><span class='op'>"+str+"</span><span class='b'>"+b+"</span><span class='op2'>"+op2+"</span><span class='c'>"+c+"</span>=&emsp;<input type='text' size='6' class='result' /></span><span class='answer  hidden'>"+answer+"</span><span class='tip'></span></div>"

			var content = document.getElementById("content");
			content.innerHTML = content.innerHTML + txt;
			if(seq%50==0 && seq <total){
				// txt += "<div style='clear: both;height: 70px;'></div>";
				content.innerHTML = content.innerHTML + "<div class='p_title'>"+title+"</div>";
			}
		}
		
		// æ ¹æ®è¢«é™¤æ•°ï¼Œéšæœºé™¤æ•°
		function getChuShu (n) {
			var yueshu = [];// çº¦æ•°
			for(var i=1;i<=n;i++){
				if(n%i==0){yueshu.push(i)}
			}
			if(yueshu.length>2){ // å¦‚æœçº¦æ•°é™¤äº†1å’Œæœ¬èº«ï¼Œå°±æ’é™¤1å’Œæœ¬èº«
				return yueshu[Math.floor(Math.random()*(yueshu.length-2)+1)];
			}
			return yueshu[Math.floor(Math.random()*yueshu.length)];
		}
		// æ˜¾ç¤ºéšè—ç­”æ¡ˆ
		function show_answer (ts) {
			var flag = false;
			if(ts.value == "æ˜¾ç¤ºç­”æ¡ˆ"){
				flag= true;
				ts.value = "éšè—ç­”æ¡ˆ";
			}else{
				flag = false;
				ts.value = "æ˜¾ç¤ºç­”æ¡ˆ"
			}
			var answers = document.getElementsByClassName("answer");
			for (var i = 0; i < answers.length; i++) {
				if(flag) answers[i].className = "answer";
				else answers[i].className = "answer hidden";
			}
		}
		// åˆ¤é¢˜
		function check_answer (ts) {
			var flag = false;
			var count_true = 0,count_false = 0;
			if(ts.value == "åˆ¤é¢˜"){
				flag= true;
				ts.value = "å–æ¶ˆåˆ¤é¢˜";
			}else{
				flag = false;
				ts.value = "åˆ¤é¢˜";
			}
			var answers = document.getElementsByClassName("answer"); 
			var results = document.getElementsByClassName("result"); 
			var tips = document.getElementsByClassName("tip"); 
			if(!flag){// å–æ¶ˆåˆ¤é¢˜
				for (var i = 0; i < tips.length; i++) {
					tips[i].innerHTML ="";
				}
				document.getElementById("show_msg").innerHTML ="";
				return;
			}
			for (var i = 0; i < results.length; i++) {
				if(results[i].value == answers[i].innerText){
					tips[i].innerHTML = "<span style='color: green;'> âˆš </span>";count_true++;
				}else{
					tips[i].innerHTML = "<span style='color: red;'> x </span>";count_false++;
				}
			}
			document.getElementById("show_msg").innerHTML = "æ€»é¢˜æ•°ï¼š" + total + "&emsp;&emsp;å¯¹ï¼š"+count_true +"&emsp;&emsp;é”™ï¼š"+count_false+"&emsp;&emsp;æ­£ç¡®ç‡ï¼š"+isFloat(count_true/total)*100 +"%";
		}
		// æ‰“å°
		function print_q () {
			var top = document.getElementById("top");
			top.style.display="none";
    		var p_titles = document.getElementsByClassName("p_title");
			for (var i = 0; i < p_titles.length; i++) {
				p_titles[i].style.display = "block";
			}
			document.getElementById("content").style.border = "0";
    		window.print(); 
    		top.style.display="block";
    		for (var i = 0; i < p_titles.length; i++) {
				p_titles[i].style.display = "none";
			}
    		document.getElementById("content").style.border = "1px black solid";
		}
		
		function show_line (ts) {
			var results = document.getElementsByClassName("result");
			for (var i = 0; i < results.length; i++) {
					results[i].style.display = "none";
			}
			print_q ();
			for (var i = 0; i < results.length; i++) {
					results[i].style.display = "inline-block";
			}
		}
		
		function show_seq (ts) {
			var seqs = document.getElementsByClassName("seq");
			for (var i = 0; i < seqs.length; i++) {
				if(ts.checked){
					seqs[i].style.display = "inline-block";
				}else{
					seqs[i].style.display = "none";
				}
			}
		}
		// å°æ•°å–ä¸¤ä½å°æ•°
		function isFloat (n) {
			if(parseInt(n) < parseFloat(n)) {
				n = n.toFixed(2);
			}
			return n;
		}
	</script>
</html>
